(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8fd6"],{"56dc":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"app-pane-lgray py-2"},[s("b-container",{attrs:{fluid:""}},[s("h1",[e._v(e._s(e.$t("testerPlaceSelection")))])])],1),s("div",[e.needPlaceConfirmation&&this.$store.state.user.me?s("b-row",[s("b-col",[s("div",{staticClass:"alert alert-info m-2"},[e._v(" "+e._s(this.$store.state.user.me.name)+", "+e._s(e.$t("testerPlaceCheckCurrentPlace"))+": "),this.$store.state.user.me.placeObj?s("span",[e._v(" "+e._s(this.$store.state.user.me.placeObj.name)+" "),s("button",{staticClass:"btn btn-light m-2",on:{click:e.confirmPlace}},[e._v(" "+e._s(e.$t("testerPlaceConfirm"))+" ")])]):s("span",[s("div",{staticClass:"alert alert-danger m-2"},[s("b",[e._v(e._s(e.$t("testerPlaceNoPlaceSelected")))])])])])])],1):e._e(),!e.needPlaceConfirmation&&this.$store.state.user.me?s("b-row",[s("b-col",[s("div",{staticClass:"alert alert-info m-2"},[e._v(" "+e._s(e.$t("testerPlaceCurrentlyWorkingAt"))+": "),this.$store.state.user.me.placeObj?s("span",[s("b",[e._v(e._s(this.$store.state.user.me.placeObj.name))])]):e._e()])])],1):e._e(),e.isAdmin&&e.$store.state.user.me.placeObj?s("b-row",[s("b-col",[s("div",{staticClass:"alert alert-info m-2"},[e._v(" "+e._s(this.$store.state.user.me.name)+", "+e._s(e.$t("testerPlaceAdminCanCancelPlace"))+" "),s("button",{staticClass:"btn btn-light m-2",on:{click:e.clearPlace}},[e._v(" "+e._s(e.$t("testerPlaceCancelPlace"))+" ")])])])],1):e._e(),s("b-table",{attrs:{items:e.places,fields:e.fields},scopedSlots:e._u([{key:"cell(id)",fn:function(t){return[s("button",{staticClass:"btn btn-primary",on:{click:function(s){return e.selectPlace(t)}}},[e._v(" "+e._s(e.$t("testerPlaceSelect"))+" "),s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"17.5",height:"19",viewBox:"0 0 33 40",role:"presentation",focusable:"false"}},[s("path",{attrs:{fill:"currentColor",d:"M0 0h13l20 20-20 20H0l20-20z"}})])])]}}])})],1)])},a=[],n=s("2f62"),i=s("c1df"),c=s.n(i);function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var d={data:function(){return{id:"",name:"",description:"",address:"",lat:48.289218275462225,lng:17.272996902465824,isDriveIn:!1,isWalkIn:!0,limitPer5MinSlot:5,limitPer1HourSlot:40,fields:[{label:this.$t("testerPlaceAction"),key:"id"},{label:this.$t("testerPlaceName"),key:"name",sortable:!0},{label:this.$t("testerPlaceAddress"),key:"address",sortable:!0}]}},computed:{places:function(){var e=this;return Object.values(this.$store.state.place.places).filter((function(t){return t.placeProviderId===e.$store.state.user.tokenData.pp&&(t.isVisible&&t.hasReservationSystem||t.isVisibleOnlyForAuthorized)}))},needPlaceConfirmation:function(){return!(!this.$store.state.user||!this.$store.state.user.me)&&(!this.$store.state.user.me.place||c()(this.$store.state.user.me.placeLastCheck).isBefore(c()().add(-5,"minutes")))}},mounted:function(){this.ReloadPlaces().then((function(e){console.log("r",e)})),this.ReloadMe()},methods:l(l(l(l({},Object(n["b"])({ReloadPlaces:"place/ReloadPlaces",InsertOrUpdate:"place/InsertOrUpdate",ReloadMe:"user/ReloadMe",Delete:"place/Delete"})),Object(n["b"])({SetLocation:"user/SetLocation"})),Object(n["b"])({openSuccess:"snackbar/openSuccess"})),{},{selectPlace:function(e){var t=this;e.item.id&&this.SetLocation({placeId:e.item.id}).then((function(e){e&&t.ReloadMe().then((function(e){e&&t.openSuccess("Úspešne ste si nastavili miesto")}))}))},confirmPlace:function(){var e=this;this.SetLocation({placeId:this.$store.state.user.me.place}).then((function(t){t&&e.ReloadMe().then((function(t){t&&e.openSuccess("Úspešne ste potvrdili svoje miesto")}))}))},clearPlace:function(){var e=this;this.SetLocation({placeId:""}).then((function(t){t&&e.ReloadMe().then((function(t){t&&e.openSuccess("Úspešne ste zrušili svoje miesto")}))}))},isAdmin:function(){for(var e in this.$store.state.user.tokenData.Role)if("Admin"===this.$store.state.user.tokenData.Role[e])return!0;return!1}})},p=d,b=s("2877"),f=Object(b["a"])(p,r,a,!1,null,null,null);t["default"]=f.exports}}]);