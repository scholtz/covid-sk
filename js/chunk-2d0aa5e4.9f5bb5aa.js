(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa5e4"],{"115c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",{staticClass:"app-pane-lgray py-2",attrs:{fluid:""}},[r("b-row",[r("b-col",[r("h1",[e._v(e._s(e.$t("navBarAdminServicesManagement")))])])],1)],1),e.loading?r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",[r("div",[r("B",[e._v("Čítam dáta")]),e._v(" "),r("b-spinner")],1)])],1)],1):e._e(),e.loading?e._e():r("b-container",{attrs:{fluid:""}},[r("b-card",{attrs:{"no-body":""}},[r("b-tabs",{attrs:{card:""},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[r("b-tab",{attrs:{title:"Zoznam poskytovaných úkonov"}},[e.addProductForm?r("div",[r("ValidationObserver",[r("validation-provider",{attrs:{name:"Názov služby",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"name-group-1",label:"Názov služby","label-for":"name","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-input",{attrs:{id:"name",name:"name",state:e.getValidationState(t),"aria-describedby":"name-feedback"},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),r("b-form-invalid-feedback",{attrs:{id:"name-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,3297154894)}),r("validation-provider",{attrs:{name:"Kategória",rules:{}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"category-group-1",label:"Kategória","label-for":"category","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-select",{attrs:{id:"category",name:"category",options:e.categories,state:e.getValidationState(t),"aria-describedby":"category-feedback"},model:{value:e.product.category,callback:function(t){e.$set(e.product,"category",t)},expression:"product.category"}},[r("b-form-select-option",{attrs:{disabled:"",value:""}},[e._v("Vyberte si kategóriu")])],1),r("b-form-invalid-feedback",{attrs:{id:"category-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,3029597386)}),r("validation-provider",{attrs:{name:"Predvolené na všetkých miestach"}},[r("b-form-group",{attrs:{id:"all-group-1",label:"Predvolené na všetkých miestach","label-for":"all","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-checkbox",{attrs:{id:"all",name:"all"},model:{value:e.product.all,callback:function(t){e.$set(e.product,"all",t)},expression:"product.all"}})],1)],1),r("validation-provider",{attrs:{name:"Iba pre poistencov"}},[r("b-form-group",{attrs:{id:"insuranceOnly-group-1",label:"Iba pre poistencov","label-for":"insuranceOnly","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-checkbox",{attrs:{id:"insuranceOnly",name:"insuranceOnly"},model:{value:e.product.insuranceOnly,callback:function(t){e.$set(e.product,"insuranceOnly",t)},expression:"product.insuranceOnly"}})],1)],1),r("validation-provider",{attrs:{name:"Popis produktu",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"description-group-1",label:"Popis produktu","label-for":"description","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-textarea",{attrs:{id:"description",name:"description",state:e.getValidationState(t),"aria-describedby":"description-feedback"},model:{value:e.product.description,callback:function(t){e.$set(e.product,"description",t)},expression:"product.description"}}),r("b-form-invalid-feedback",{attrs:{id:"description-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,2668231763)}),r("validation-provider",{attrs:{name:"Predvolená cena",rules:{required:!0,regex:/^(?=.*[0-9])\d+(\.\d+)?$/}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"price-group-1",label:"Predvolená cena (Bez DPH a servisných poplatkov)","label-for":"price","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-input",{attrs:{id:"price",name:"price",type:"number",step:"0.01",min:"0",state:e.getValidationState(t),"aria-describedby":"price-feedback"},model:{value:e.product.defaultPrice,callback:function(t){e.$set(e.product,"defaultPrice",t)},expression:"product.defaultPrice"}}),r("b-form-invalid-feedback",{attrs:{id:"price-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,856765686)}),r("validation-provider",{attrs:{name:"Mena",rules:{}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"currency-group-1",label:"Mena","label-for":"currency","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-select",{attrs:{id:"currency",name:"currency",options:e.currencies,state:e.getValidationState(t),"aria-describedby":"currency-feedback"},model:{value:e.product.defaultPriceCurrency,callback:function(t){e.$set(e.product,"defaultPriceCurrency",t)},expression:"product.defaultPriceCurrency"}}),r("b-form-invalid-feedback",{attrs:{id:"currency-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,698154485)}),e.edit?e._e():r("b-button",{staticClass:"mr-1",attrs:{disabled:!e.formOk},on:{click:e.newProductClick}},[e._v(" Pridaj ")]),e.edit?r("b-button",{staticClass:"mr-1",attrs:{disabled:!e.formOk},on:{click:e.updateProductClick}},[e._v(" Uprav ")]):e._e(),r("b-button",{attrs:{variant:"light"},on:{click:e.cancelProductClick}},[e._v(" Zruš ")])],1)],1):e._e(),e.addProductForm?e._e():r("div",[r("b-button",{staticClass:"m-1 float-right",attrs:{variant:"light",title:"Pridať",size:"sm"},on:{click:function(t){return e.addProductClick()}}},[r("font-awesome-icon",{staticClass:"m-1",attrs:{icon:"plus"}})],1),r("b-table",{attrs:{items:e.products,fields:e.fieldsProducts,sortBy:"lastUpdate",sortDesc:!0},scopedSlots:e._u([{key:"cell(lastUpdate)",fn:function(t){return[e._v(" "+e._s(e._f("formatDateTime")(t.item.lastUpdate))+" ")]}},{key:"cell(createdOn)",fn:function(t){return[e._v(" "+e._s(e._f("formatDateTime")(t.item.createdOn))+" ")]}},{key:"cell(category)",fn:function(t){return[e._v(" "+e._s(e.translateCategory(t.item.category))+" ")]}},{key:"cell(all)",fn:function(t){return[t.item.all?r("div",[e._v("Aplikované na všetky miesta")]):r("div",[e._v("Aplikovateľné na konkrétne miesto")])]}},{key:"cell(insuranceOnly)",fn:function(t){return[t.item.insuranceOnly?r("div",[e._v("Ibe pre poistencov")]):r("div",[e._v("Pre všetkých")])]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{staticClass:"mr-1",attrs:{variant:"light",title:"Upraviť",size:"sm"},on:{click:function(r){return e.editProductClick(t)}}},[r("font-awesome-icon",{staticClass:"m-1",attrs:{icon:"edit"}})],1),r("b-button",{staticClass:"mr-1",attrs:{variant:"light",title:"Zrušiť",size:"sm"},on:{click:function(r){return e.deleteProductClick(t)}}},[r("font-awesome-icon",{staticClass:"m-1",attrs:{icon:"trash"}})],1)]}}],null,!1,3963783385)})],1)]),r("b-tab",{attrs:{title:"Poskytované úkony"}},[e.addPPRForm?r("div",[r("ValidationObserver",[r("validation-provider",{attrs:{name:"Miesto",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"place-group-1",label:"Miesto","label-for":"place","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-select",{attrs:{id:"place",name:"place",options:Object.values(e.$store.state.place.places),"value-field":"id","text-field":"name",state:e.getValidationState(t),"aria-describedby":"place-feedback"},model:{value:e.ppr.placeId,callback:function(t){e.$set(e.ppr,"placeId",t)},expression:"ppr.placeId"}},[r("b-form-select-option",{attrs:{disabled:"",value:""}},[e._v("Vyberte si miesto")])],1),r("b-form-invalid-feedback",{attrs:{id:"place-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,2943159928)}),r("validation-provider",{attrs:{name:"Produkt",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"product-group-1",label:"Produkt","label-for":"product","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-select",{attrs:{id:"product",name:"product",options:e.products,"value-field":"id","text-field":"name",state:e.getValidationState(t),"aria-describedby":"category-feedback"},model:{value:e.ppr.productId,callback:function(t){e.$set(e.ppr,"productId",t)},expression:"ppr.productId"}},[r("b-form-select-option",{attrs:{disabled:"",value:""}},[e._v("Vyberte si produkt")])],1),r("b-form-invalid-feedback",{attrs:{id:"category-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,3451084771)}),r("validation-provider",{attrs:{name:"Platnosť od"}},[r("b-form-group",{attrs:{id:"frombool-group-1",label:"Platnosť od","label-for":"frombool","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-checkbox",{attrs:{id:"frombool",name:"frombool"},model:{value:e.fromBool,callback:function(t){e.fromBool=t},expression:"fromBool"}})],1)],1),e.fromBool?r("validation-provider",{attrs:{name:"Platnosť od"}},[r("b-form-group",{attrs:{id:"from-group-1",label:"","label-for":"from","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"from-datepicker"},model:{value:e.ppr.from,callback:function(t){e.$set(e.ppr,"from",t)},expression:"ppr.from"}})],1)],1):e._e(),r("validation-provider",{attrs:{name:"Platnosť do"}},[r("b-form-group",{attrs:{id:"untilbool-group-1",label:"Platnosť do","label-for":"untilbool","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-checkbox",{attrs:{id:"untilbool",name:"untilbool"},model:{value:e.untilBool,callback:function(t){e.untilBool=t},expression:"untilBool"}})],1)],1),e.untilBool?r("validation-provider",{attrs:{name:"Platnosť do"}},[r("b-form-group",{attrs:{id:"until-group-1",label:"","label-for":"until","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"until-datepicker"},model:{value:e.ppr.until,callback:function(t){e.$set(e.ppr,"until",t)},expression:"ppr.until"}})],1)],1):e._e(),r("validation-provider",{attrs:{name:"Upravená cena"}},[r("b-form-group",{attrs:{id:"customPrice-group-1",label:"Upravená cena (Bez DPH a servisných poplatkov)","label-for":"customPrice","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-checkbox",{attrs:{id:"customPrice",name:"customPrice"},model:{value:e.ppr.customPrice,callback:function(t){e.$set(e.ppr,"customPrice",t)},expression:"ppr.customPrice"}})],1)],1),e.ppr.customPrice?r("validation-provider",{attrs:{name:"Predvolená cena",rules:{required:!0,regex:/^(?=.*[0-9])\d+(\.\d+)?$/}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"price-group-1",label:"Predvolená cena (Bez DPH a servisných poplatkov)","label-for":"price","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-input",{attrs:{id:"price",name:"price",type:"number",step:"0.01",min:"0",state:e.getValidationState(t),"aria-describedby":"price-feedback"},model:{value:e.ppr.price,callback:function(t){e.$set(e.ppr,"price",t)},expression:"ppr.price"}}),r("b-form-invalid-feedback",{attrs:{id:"price-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,472325188)}):e._e(),e.ppr.customPrice?r("validation-provider",{attrs:{name:"Mena",rules:{}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-form-group",{attrs:{id:"currency-group-1",label:"Mena","label-for":"currency","label-cols-sm":"4","label-cols-lg":"2"}},[r("b-form-select",{attrs:{id:"currency",name:"currency",options:e.currencies,state:e.getValidationState(t),"aria-describedby":"currency-feedback"},model:{value:e.ppr.priceCurrency,callback:function(t){e.$set(e.ppr,"priceCurrency",t)},expression:"ppr.priceCurrency"}}),r("b-form-invalid-feedback",{attrs:{id:"currency-feedback"}},[e._v(e._s(t.errors[0]))])],1)]}}],null,!1,612798023)}):e._e(),e.ppr.id?e._e():r("b-button",{staticClass:"mr-1",attrs:{disabled:!e.formPPROk},on:{click:e.newPPRClick}},[e._v(" Pridaj produkt k miestu ")]),e.ppr.id?r("b-button",{staticClass:"mr-1",attrs:{disabled:!e.formPPROk},on:{click:e.updatePPRClick}},[e._v(" Uprav produkt na mieste ")]):e._e(),r("b-button",{attrs:{variant:"light"},on:{click:e.cancelPPRClick}},[e._v(" Zruš ")])],1)],1):e._e(),e.addPPRForm?e._e():r("div",[r("b-button",{staticClass:"m-1 float-right",attrs:{variant:"light",title:"Pridať",size:"sm"},on:{click:function(t){return e.addPPRClick()}}},[r("font-awesome-icon",{staticClass:"m-1",attrs:{icon:"plus"}})],1),r("b-table",{attrs:{items:e.pprs,fields:e.fieldsPPR},scopedSlots:e._u([{key:"cell(placeId)",fn:function(t){return[e._v(" "+e._s(e.translatePlace(t.item.placeId))+" ")]}},{key:"cell(productId)",fn:function(t){return[e._v(" "+e._s(e.translateProduct(t.item.productId))+" ")]}},{key:"cell(from)",fn:function(t){return[t.item.from?r("div",[e._v(" "+e._s(e._f("formatDateTime")(t.item.from))+" ")]):r("div",[e._v("Bez obmedzenia")])]}},{key:"cell(until)",fn:function(t){return[t.item.until?r("div",[e._v(" "+e._s(e._f("formatDateTime")(t.item.until))+" ")]):r("div",[e._v("Bez obmedzenia")])]}},{key:"cell(customPrice)",fn:function(t){return[t.item.customPrice?r("div",[e._v("Upravená cena")]):r("div",[e._v("Predvolená cena")])]}},{key:"cell(category)",fn:function(t){return[e._v(" "+e._s(e.translateCategory(t.item.category))+" ")]}},{key:"cell(all)",fn:function(t){return[t.item.all?r("div",[e._v("Aplikované na všetky miesta")]):r("div",[e._v("Aplikovateľné na konkrétne miesto")])]}},{key:"cell(insuranceOnly)",fn:function(t){return[t.item.insuranceOnly?r("div",[e._v("Ibe pre poistencov")]):r("div",[e._v("Pre všetkých")])]}},{key:"cell(actions)",fn:function(t){return[t.item.id?r("div",[r("b-button",{staticClass:"mr-1",attrs:{variant:"light",title:"Upraviť",size:"sm"},on:{click:function(r){return e.editPPRClick(t)}}},[r("font-awesome-icon",{staticClass:"m-1",attrs:{icon:"edit"}})],1),r("b-button",{staticClass:"mr-1",attrs:{variant:"light",title:"Zrušiť",size:"sm"},on:{click:function(r){return e.deletePPRClick(t)}}},[r("font-awesome-icon",{staticClass:"m-1",attrs:{icon:"trash"}})],1)],1):r("div",[e._v("Upravte produkt")])]}}],null,!1,3518505780)})],1)])],1)],1)],1)],1)},o=[],i=r("2f62"),l=r("039f"),c=r("70d1");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object(l["localize"])("sk",c);var u={components:{ValidationProvider:l["ValidationProvider"],ValidationObserver:l["ValidationObserver"]},data:function(){return{tabIndex:1,loading:!0,addProductForm:!1,addPPRForm:!0,edit:!1,editPPR:!1,fromBool:!1,untilBool:!1,product:{name:"",description:"",defaultPrice:0,all:!0,defaultPriceCurrency:"EUR",category:"",insuranceOnly:!1},ppr:{placeId:"",productId:"",from:null,until:null},products:[],pprs:[],currencies:["EUR","USD","CZK"],categories:[{text:"PCR Test",value:"pcr"},{text:"Antigénový Test",value:"ant"},{text:"Vakcína",value:"vac"}],fieldsProducts:[{label:"Názov",key:"name",sortable:!0},{label:"Kategória",key:"category",sortable:!0},{label:"Iba poistenci",key:"insuranceOnly",sortable:!0},{label:"Všetky miesta",key:"all",sortable:!0},{label:"Predvolená cena (Bez DPH a servisných poplatkov)",key:"defaultPrice",sortable:!0},{label:"Mena",key:"defaultPriceCurrency",sortable:!0},{label:"Vytvorené",key:"createdOn",sortable:!0},{label:"Upravené",key:"lastUpdate",sortable:!0},{label:"Akcie",key:"actions",sortable:!1}],fieldsPPR:[{label:this.$t("AdminListOfProvidedServicesOnTheSpotName"),key:"placeId",sortable:!0},{label:this.$t("AdminListOfProvidedServicesOnTheSpotServiceName"),key:"productId",sortable:!0},{label:this.$t("AdminListOfProvidedServicesOnTheSpotFrom"),key:"from",sortable:!0},{label:this.$t("AdminListOfProvidedServicesOnTheSpotUntil"),key:"until",sortable:!0},{label:this.$t("AdminListOfProvidedServicesOnTheSpotCustomPrice"),key:"customPrice",sortable:!0},{label:this.$t("AdminListOfProvidedServicesOnTheSpotPrice"),key:"price",sortable:!0},{label:this.$t("AdminListOfProvidedServicesOnTheSpotCurrency"),key:"priceCurrency",sortable:!0},{label:this.$t("AdminListOfProvidedServicesOnTheSpotAction"),key:"actions",sortable:!1}]}},computed:{formOk:function(){return""!=this.product.name&&this.product.defaultPrice>=0&&this.product.category},formPPROk:function(){return this.ppr.placeId&&this.ppr.productId}},watch:{fromBool:function(){this.fromBool||(this.ppr.from=null)},untilBool:function(){this.untilBool||(this.ppr.until=null)}},mounted:function(){var e=this;this.ListProducts().then((function(t){t&&(e.products=t,e.products&&(e.addPPRForm=!1),e.loading=!1)})),this.ReloadPlaces().then((function(t){t&&e.ListPlaceProduct().then((function(t){t&&(e.pprs=t)}))}))},methods:s(s(s({},Object(i["b"])({ListProducts:"placeProvider/ListProducts",CreateProduct:"placeProvider/CreateProduct",UpdateProduct:"placeProvider/UpdateProduct",DeleteProduct:"placeProvider/DeleteProduct",ListPlaceProduct:"placeProvider/ListPlaceProduct",ListPrivate:"placeProvider/ListPrivate",ReloadPlaces:"place/ReloadPrivatePlaces",DeletePlaceProduct:"place/DeletePlaceProduct",InsertOrUpdatePlaceProduct:"place/InsertOrUpdatePlaceProduct"})),Object(i["b"])({openSuccess:"snackbar/openSuccess"})),{},{addPPRClick:function(){this.ppr={},this.addPPRForm=!0,this.editPPR=!1},addProductClick:function(){this.product={name:"",description:"",defaultPrice:0,all:!0,defaultPriceCurrency:"EUR",category:"",insuranceOnly:!1},this.addProductForm=!0,this.edit=!1},cancelPPRClick:function(){this.addPPRForm=!1},cancelProductClick:function(){this.addProductForm=!1},editProductClick:function(e){this.product=e.item,this.addProductForm=!0,this.edit=!0},editPPRClick:function(e){this.ppr=e.item,this.addPPRForm=!0,this.editPPR=!0},deleteProductClick:function(e){var t=this;confirm("Naozaj chcete vymazať produkt?")&&this.DeleteProduct({product:e.item}).then((function(e){e&&(t.loading=!0,t.addProdaddPPRFormuctForm=!1,t.ListProducts().then((function(e){e&&(t.products=e,t.loading=!1,t.updatePPR())})))}))},deletePPRClick:function(e){var t=this;confirm("Naozaj chcete vymazať produkt z miesta?")&&this.DeletePlaceProduct({placeProductid:e.item.id}).then((function(e){e&&t.updatePPR()}))},getValidationState:function(e){var t=e.dirty,r=e.validated,a=e.valid,o=void 0===a?null:a;return t||r?o:null},updatePPR:function(){var e=this;this.ListPlaceProduct().then((function(t){t&&(e.pprs=t)}))},newProductClick:function(){var e=this;this.CreateProduct({product:this.product}).then((function(t){t&&(e.loading=!0,e.addProductForm=!1,e.ListProducts().then((function(t){t&&(e.products=t,e.loading=!1,e.updatePPR())})))}))},newPPRClick:function(){var e=this;this.InsertOrUpdatePlaceProduct({placeProduct:this.ppr}).then((function(t){t&&(e.updatePPR(),e.addPPRForm=!1)}))},updatePPRClick:function(){var e=this;this.InsertOrUpdatePlaceProduct({placeProduct:this.ppr}).then((function(t){t&&(e.updatePPR(),e.addPPRForm=!1)}))},updateProductClick:function(){var e=this;this.UpdateProduct({product:this.product}).then((function(t){t&&(e.loading=!0,e.addProductForm=!1,e.ListProducts().then((function(t){t&&(e.products=t,e.loading=!1,e.updatePPR())})))}))},translateCategory:function(e){for(var t in this.categories)if(this.categories[t].value==e)return this.categories[t].text;return e},translatePlace:function(e){return console.log("placeid",e,this.$store.state.place.places),this.$store.state.place.places&&this.$store.state.place.places[e]?this.$store.state.place.places[e].name:"?"},translateProduct:function(e){var t=this.products.find((function(t){return t.id==e}));return t?t.name:"?"}})},p=u,b=r("2877"),f=Object(b["a"])(p,a,o,!1,null,null,null);t["default"]=f.exports}}]);