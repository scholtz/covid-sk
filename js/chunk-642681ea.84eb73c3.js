(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-642681ea"],{2264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={code:"cs",week:{dow:1,doy:4},buttonText:{prev:"Dříve",next:"Později",today:"Nyní",month:"Měsíc",week:"Týden",day:"Den",list:"Agenda"},weekText:"Týd",allDayText:"Celý den",moreLinkText:function(e){return"+další: "+e},noEventsText:"Žádné akce k zobrazení"};t.default=a},d88c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"app-pane-lgray py-2"},[n("b-container",{attrs:{fluid:""}},[n("h1",[e._v(" "+e._s(e.$t("workingTimeScheduleTitle"))+": "),e.placePrivider?n("span",[e._v(e._s(e.placePrivider.companyName))]):e._e()])])],1),e.revision?n("div",{staticClass:"py-3"},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("h2",[e._v(e._s(e.$t("workingTimeRevision")))]),n("ol",{attrs:{id:"example-2"}},e._l(e.sortedActions(),(function(t,a){return n("li",{key:a},["delete"===t.type?n("span",[e._v(" "+e._s(e.$t("workingTimeOnDay"))+" "),n("b",[e._v(e._s(new Date(t.date).toLocaleDateString(e.$i18n.locale||"sk")))]),e._v(" "+e._s(e.$t("workingTimePlaceWillBe"))+" "),n("b",[e._v(e._s(e.$t("workingTimeClosed")))])]):e._e(),"set"===t.type?n("span",[e._v(" "+e._s(e.$t("workingTimeOnDay"))+" "),n("b",[e._v(e._s(new Date(t.date).toLocaleDateString(e.$i18n.locale||"sk")))]),e._v(" "+e._s(e.$t("workingTimePlaceWillBe"))+" "),e.placeObj?n("span",[n("b",[e._v(e._s(e.placeObj.name))])]):e._e(),e._v(" "+e._s(e.$t("workingTimeClosed"))+" "),n("b",[e._v(e._s(e.$t("workingTimeNumber"))+" "+e._s(t.openingHoursTemplateId))]),e.placeObj?e._e():n("span",[e._v(e._s(e.$t("workingTimeThatIsSpecific")))])]):e._e(),e.placeObj?n("span",[e._v(" - "),n("b",[e._v(e._s(e.template1))])]):e._e()])})),0)])],1),n("b-row",[n("b-col",{attrs:{"offset-md":"0"}},[e.allPlaces?n("div",{staticClass:"alert alert-danger"},[e._v(" "+e._s(e.$t("workingTimeWarningAlert"))+" ")]):e._e(),n("b-button",{staticClass:"m-2",attrs:{variant:"primary"},on:{click:e.saveClick}},[e._v(" "+e._s(e.$t("workingTimeSave"))+" "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"17.5",height:"19",viewBox:"0 0 33 40",role:"presentation",focusable:"false"}},[n("path",{attrs:{fill:"currentColor",d:"M0 0h13l20 20-20 20H0l20-20z"}})])]),n("b-button",{staticClass:"m-2",attrs:{variant:"light"},on:{click:e.revisionBackClick}},[e._v(" "+e._s(e.$t("workingTimeBack"))+" ")])],1)],1)],1)],1):e._e(),e.revision?e._e():n("div",{staticClass:"py-3",staticStyle:{"margin-bottom":"10px"}},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{md:"3"}},[n("p")]),n("b-col",{attrs:{md:"2"}},[n("b",[e._v(e._s(e.$t("workingTimeSetTimeFor"))+":")]),n("b-form-checkbox",{staticClass:"text-right",attrs:{id:"allPlaces",name:"allPlaces"},model:{value:e.allPlaces,callback:function(t){e.allPlaces=t},expression:"allPlaces"}},[e._v(" "+e._s(e.$t("workingTimeAllPlaces"))+" ")])],1),n("b-col",{attrs:{cols:"7"}},[n("b-form-select",{attrs:{disabled:e.allPlaces,options:e.places,"text-field":"name","value-field":"id"},model:{value:e.place,callback:function(t){e.place=t},expression:"place"}},[n("b-form-select-option",{attrs:{disabled:"",value:""}},[e._v(e._s(e.$t("workingTimeSelectPlace")))])],1)],1)],1)],1)],1),e.revision?e._e():n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{md:"3"}},[n("h2",[e._v(e._s(e.$t("workingTimeOpeningHours")))]),n("b-row",[n("b-col",[e._v(" "+e._s(e.$t("workingTimeFrom"))+" "),n("VueCtkDateTimePicker",{attrs:{"only-date":!0,formatted:"DD.MM.YYYY",label:e.$t("workingTimeFromDate"),locale:e.locale},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1),n("b-col",[e._v(" "+e._s(e.$t("workingTimeUntil"))+" "),n("VueCtkDateTimePicker",{attrs:{"only-date":!0,formatted:"DD.MM.YYYY",label:e.$t("workingTimeUntilDate"),locale:e.locale},model:{value:e.untilDate,callback:function(t){e.untilDate=t},expression:"untilDate"}})],1)],1),n("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"darkgreen",color:"white"},on:{click:function(t){return e.createEvent(1)}}},[e._v(" "+e._s(e.template1)+" ")]),n("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"navy",color:"white"},on:{click:function(t){return e.createEvent(2)}}},[e._v(" "+e._s(e.$t("workingTimeOpeningHoursOther1"))+" ")]),n("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"purple",color:"white"},on:{click:function(t){return e.createEvent(3)}}},[e._v(" "+e._s(e.$t("workingTimeOpeningHoursOther2"))+" ")]),n("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"darkred",color:"white"},on:{click:function(t){return e.createEvent(4)}}},[e._v(" "+e._s(e.$t("workingTimeClosedOption"))+" ")])],1),n("b-col",{attrs:{md:"9"}},[n("FullCalendar",{attrs:{options:Object.assign({},e.calendarOptions,{locale:e.calendarLocale})}})],1)],1),n("b-row",{staticClass:"my-4"},[n("b-col",{attrs:{"offset-md":"3"}},[n("button",{staticClass:"btn btn-primary my-2",on:{click:e.revisionClick}},[e._v(" "+e._s(e.$t("workingTimeRevisionOverview"))+" "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"17.5",height:"19",viewBox:"0 0 33 40",role:"presentation",focusable:"false"}},[n("path",{attrs:{fill:"currentColor",d:"M0 0h13l20 20-20 20H0l20-20z"}})])])])],1)],1)],1)},s=[],i=n("f5ff"),r=n("3cdd"),o=n("a20c"),l=n("2f62"),c=n("327e"),u=n.n(c),p=n("2264"),d=n.n(p),v=n("c1df"),h=n.n(v),m=n("e30a"),f=n.n(m);n("b40d");function b(e){return b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={components:{FullCalendar:i["a"],VueCtkDateTimePicker:f.a},data:function(){return{place:"",allPlaces:!0,revision:!1,actions:{},day:"2020-10-31T00:00:00+00:00",from:9,until:12,fromDate:(new Date).toISOString(),untilDate:(new Date).toISOString(),calendarOptions:{locale:u.a,plugins:[r["b"],o["a"]],initialView:"dayGridMonth",selectable:!0,select:this.select,selectAllow:this.selectAllow,showNonCurrentDates:!0,fixedWeekCount:!1,contentHeight:400,firstDay:1,events:[]}}},computed:{locale:function(){return this.$i18n.locale},placeObj:function(){return this.$store.state.place.places&&this.$store.state.place.places[this.place]?this.$store.state.place.places[this.place]:{}},template1:function(){var e=this.placeObj;return e&&e["openingHoursWorkDay"]?e["openingHoursWorkDay"]:this.$t("workingTimeOpeningHoursWorkDay")},template2:function(){var e=this.placeObj;return e&&e["openingHoursOther1"]?e["openingHoursOther1"]:this.$t("workingTimeOpeningHoursOther1")},template3:function(){var e=this.placeObj;return e&&e["openingHoursOther2"]?e["openingHoursOther2"]:this.$t("workingTimeOpeningHoursOther2")},placePrivider:function(){var e=this;return this.$store.state.placeProvider.places?this.$store.state.placeProvider.places.find((function(t){return t.placeProviderId===e.pp})):{}},pp:function(){return this.$store.state?this.$store.state.user.tokenData.pp:""},places:function(){function e(e,t){return e.name<t.name?-1:e.name>t.name?1:0}return Object.values(this.$store.state.place.places).sort(e)},calendarLocale:function(){switch(this.$i18n.locale){case"sk":return u.a;case"cs":return d.a;default:return null}}},watch:{place:function(){var e=this;this.ListScheduledDays({placeId:this.allPlaces?"__ALL__":this.place}).then((function(t){t&&e.processScheduledDays(t)}))},allPlaces:function(){var e=this;this.ListScheduledDays({placeId:this.allPlaces?"__ALL__":this.place}).then((function(t){t&&e.processScheduledDays(t)}))}},mounted:function(){var e=this;this.ListPrivate(),this.ReloadPlaces(),this.ListScheduledDays({placeId:this.allPlaces?"__ALL__":this.place}).then((function(t){t&&e.processScheduledDays(t)}))},methods:_(_(_({},Object(l["b"])({ReloadPlaces:"place/ReloadPrivatePlaces",ListPrivate:"placeProvider/ListPrivate",ListScheduledDays:"place/ListScheduledDays",ScheduleOpenningHours:"place/ScheduleOpenningHours"})),Object(l["b"])({openSuccess:"snackbar/openSuccess"})),{},{processScheduledDays:function(e){for(var t in this.calendarOptions.events=[],this.actions={},e){var n=e[t],a=this.$t("workingTimeOpeningHoursTemplatesOthers"),s=this.getBackground(0);1==n.openingHoursTemplates.length&&(a=this.$t("workingTimeOpeningHoursTemplate")+" "+n.openingHoursTemplates[0],s=this.getBackground(n.openingHoursTemplates[0])),1==n.openingHours.length&&(a=n.openingHours[0]),a+=" [".concat(n.count,"]"),this.calendarOptions.events.push({title:a,start:n.day,allDay:!0,backgroundColor:s})}console.log("this.calendarOptions.events",this.calendarOptions.events)},getBackground:function(e){return 1==e?"darkgreen":2==e?"navy":3==e?"purple":0==e?"#999":void 0},sortedActions:function(){var e=Object.values(this.actions).sort((function(e,t){return new Date(e.date)-new Date(t.date)}));return console.log("ret",e),e},select:function(e){console.log("typeof info.startStr",b(e.start)),e.start.setHours(12,0,0,0),e.end.setHours(0,0,0,0),this.fromDate=e.start.toISOString(),this.untilDate=e.end.toISOString()},selectAllow:function(e){var t=new Date,n=t.setDate(t.getDate()-1);return!(n>e.start)},revisionClick:function(){this.revision=!0},revisionBackClick:function(){this.revision=!1},saveClick:function(){var e=this;this.ScheduleOpenningHours({actions:Object.values(this.actions)}).then((function(t){t&&e.ListScheduledDays({placeId:e.allPlaces?"__ALL__":e.place}).then((function(t){t&&(e.processScheduledDays(t),e.revision=!1,e.openSuccess(e.$t("workingTimeSetSuccessMessage")))}))}))},createEvent:function(e){var t=this,n="#999";1==e&&(n="darkgreen"),2==e&&(n="navy"),3==e&&(n="purple");for(var a=function(){var a=new Date(s);a.setHours(12,0,0,0);var i=a.toISOString();if(t.calendarOptions.events=t.calendarOptions.events.filter((function(e){return h()(e.start).format("L")!==h()(i).format("L")})),e<=3){var r=t.$t("workingTimeOpeningHoursTemplate")+" "+e;1===e&&(r=t.template1),2===e&&(r=t.template2),3===e&&(r=t.template3),t.calendarOptions.events.push({title:r,start:i,allDay:!0,backgroundColor:n}),t.actions[i]={date:i,type:"set",openingHoursTemplateId:e,placeId:t.allPlaces?"__ALL__":t.place}}else t.actions[i]={date:i,type:"delete",openingHoursTemplateId:e,placeId:t.allPlaces?"__ALL__":t.place}},s=new Date(this.fromDate);s<new Date(this.untilDate);s.setDate(s.getDate()+1))a();console.log("this.calendarOptions.events",this.calendarOptions.events)}})},y=k,O=n("2877"),D=Object(O["a"])(y,a,s,!1,null,null,null);t["default"]=D.exports}}]);