(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ef75"],{d88c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"app-pane-lgray py-2"},[a("b-container",{attrs:{fluid:""}},[a("h1",[e._v(" "+e._s(e.$t("workingTimeScheduleTitle"))+": "),e.placePrivider?a("span",[e._v(e._s(e.placePrivider.companyName))]):e._e()])])],1),e.revision?a("div",{staticClass:"py-3"},[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",[a("h2",[e._v("Revízia zmien")]),a("ol",{attrs:{id:"example-2"}},e._l(e.sortedActions(),(function(t,n){return a("li",{key:n},["delete"===t.type?a("span",[e._v(" Dňa "),a("b",[e._v(e._s(new Date(t.date).toLocaleDateString("sk")))]),e._v(" bude odberové miesto "),a("b",[e._v("zavreté")])]):e._e(),"set"===t.type?a("span",[e._v(" Dňa "),a("b",[e._v(e._s(new Date(t.date).toLocaleDateString("sk")))]),e._v(" bude odberové miesto "),e.placeObj?a("span",[a("b",[e._v(e._s(e.placeObj.name))])]):e._e(),e._v(" otvorené so šablónou "),a("b",[e._v("č. "+e._s(t.openingHoursTemplateId))]),e.placeObj?e._e():a("span",[e._v("ktorá je nastavená v každom odbernom mieste zvlášť")])]):e._e(),e.placeObj?a("span",[e._v(" - "),a("b",[e._v(e._s(e.template1))])]):e._e()])})),0)])],1),a("b-row",[a("b-col",{attrs:{"offset-md":"0"}},[e.allPlaces?a("div",{staticClass:"alert alert-danger"},[e._v(" Pozor! Chystáte sa zmeniť otváracie miesta na všetkých Vašich odberných miestach ")]):e._e(),a("b-button",{staticClass:"m-2",attrs:{variant:"primary"},on:{click:e.saveClick}},[e._v(" Uložiť "),a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"17.5",height:"19",viewBox:"0 0 33 40",role:"presentation",focusable:"false"}},[a("path",{attrs:{fill:"currentColor",d:"M0 0h13l20 20-20 20H0l20-20z"}})])]),a("b-button",{staticClass:"m-2",attrs:{variant:"light"},on:{click:e.revisionBackClick}},[e._v(" Späť ")])],1)],1)],1)],1):e._e(),e.revision?e._e():a("div",{staticClass:"py-3",staticStyle:{"margin-bottom":"10px"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{md:"3"}},[a("p")]),a("b-col",{attrs:{md:"2"}},[a("b",[e._v("Nastavujete čas pre:")]),a("b-form-checkbox",{staticClass:"text-right",attrs:{id:"allPlaces",name:"allPlaces"},model:{value:e.allPlaces,callback:function(t){e.allPlaces=t},expression:"allPlaces"}},[e._v(" Všetky miesta ")])],1),a("b-col",{attrs:{cols:"7"}},[a("b-form-select",{attrs:{disabled:e.allPlaces,options:Object.values(e.$store.state.place.places),"text-field":"name","value-field":"id"},model:{value:e.place,callback:function(t){e.place=t},expression:"place"}},[a("b-form-select-option",{attrs:{disabled:"",value:""}},[e._v("Vyberte si miesto pre nastavenie harmonogramu otváracích hodín")])],1)],1)],1)],1)],1),e.revision?e._e():a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{md:"3"}},[a("h2",[e._v("Otváracie hodiny")]),a("b-row",[a("b-col",[e._v(" Od "),a("VueCtkDateTimePicker",{attrs:{"only-date":!0,formatted:"DD.MM.YYYY",label:"Od dátumu"},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1),a("b-col",[e._v(" Do "),a("VueCtkDateTimePicker",{attrs:{"only-date":!0,formatted:"DD.MM.YYYY",label:"Do dátumu"},model:{value:e.untilDate,callback:function(t){e.untilDate=t},expression:"untilDate"}})],1)],1),a("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"darkgreen",color:"white"},on:{click:function(t){return e.createEvent(1)}}},[e._v(" "+e._s(e.template1)+" ")]),a("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"navy",color:"white"},on:{click:function(t){return e.createEvent(2)}}},[e._v(" Šablóna otváracích hodín 2 (víkendy) ")]),a("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"purple",color:"white"},on:{click:function(t){return e.createEvent(3)}}},[e._v(" Šablóna otváracích hodín 3 (sviatky) ")]),a("button",{staticClass:"my-2 w-100 btn btn-primary",staticStyle:{background:"darkred",color:"white"},on:{click:function(t){return e.createEvent(4)}}},[e._v(" Zatvorené ")])],1),a("b-col",{attrs:{md:"9"}},[a("FullCalendar",{attrs:{options:e.calendarOptions}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{"offset-md":"3"}},[a("button",{staticClass:"btn btn-primary my-2",on:{click:e.revisionClick}},[e._v(" Prehľad zmien "),a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"17.5",height:"19",viewBox:"0 0 33 40",role:"presentation",focusable:"false"}},[a("path",{attrs:{fill:"currentColor",d:"M0 0h13l20 20-20 20H0l20-20z"}})])])])],1)],1)],1)},s=[],o=a("f5ff"),r=a("3cdd"),i=a("a20c"),l=a("2f62"),c=a("327e"),u=a.n(c),p=a("e30a"),d=a.n(p);a("b40d");function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={components:{FullCalendar:o["a"],VueCtkDateTimePicker:d.a},data:function(){return{place:"",allPlaces:!0,revision:!1,actions:{},day:"2020-10-31T00:00:00+00:00",from:9,until:12,fromDate:(new Date).toISOString(),untilDate:(new Date).toISOString(),calendarOptions:{locale:u.a,plugins:[r["b"],i["a"]],initialView:"dayGridMonth",selectable:!0,select:this.select,selectAllow:this.selectAllow,showNonCurrentDates:!0,fixedWeekCount:!1,contentHeight:400,firstDay:1,events:[]}}},computed:{placeObj:function(){return this.$store.state.place.places&&this.$store.state.place.places[this.place]?this.$store.state.place.places[this.place]:{}},template1:function(){var e=this.placeObj;return e&&e["openingHoursWorkDay"]?e["openingHoursWorkDay"]:"Šablóna otváracích hodín 1"},template2:function(){var e=this.placeObj;return e&&e["openingHoursOther1"]?e["openingHoursOther1"]:"Šablóna otváracích hodín 2"},template3:function(){var e=this.placeObj;return e&&e["openingHoursOther2"]?e["openingHoursOther2"]:"Šablóna otváracích hodín 3"},placePrivider:function(){var e=this;return this.$store.state.placeProvider.places?this.$store.state.placeProvider.places.find((function(t){return t.placeProviderId===e.pp})):{}},pp:function(){return this.$store.state?this.$store.state.user.tokenData.pp:""}},watch:{place:function(){var e=this;this.ListScheduledDays({placeId:this.allPlaces?"__ALL__":this.place}).then((function(t){t&&e.processScheduledDays(t)}))},allPlaces:function(){var e=this;this.ListScheduledDays({placeId:this.allPlaces?"__ALL__":this.place}).then((function(t){t&&e.processScheduledDays(t)}))}},mounted:function(){var e=this;this.ListPrivate(),this.ReloadPlaces(),this.ListScheduledDays({placeId:this.allPlaces?"__ALL__":this.place}).then((function(t){t&&e.processScheduledDays(t)}))},methods:b(b(b({},Object(l["b"])({ReloadPlaces:"place/ReloadPrivatePlaces",ListPrivate:"placeProvider/ListPrivate",ListScheduledDays:"place/ListScheduledDays",ScheduleOpenningHours:"place/ScheduleOpenningHours"})),Object(l["b"])({openSuccess:"snackbar/openSuccess"})),{},{processScheduledDays:function(e){for(var t in this.calendarOptions.events=[],this.actions={},e){var a=e[t],n="Rôžne šablóny otv. hodín",s=this.getBackground(0);1==a.openingHoursTemplates.length&&(n="Šablóna otv. hodín miesta "+a.openingHoursTemplates[0],s=this.getBackground(a.openingHoursTemplates[0])),1==a.openingHours.length&&(n=a.openingHours[0]),n+=" [".concat(a.count,"]"),this.calendarOptions.events.push({title:n,start:a.day,allDay:!0,backgroundColor:s})}console.log("this.calendarOptions.events",this.calendarOptions.events)},getBackground:function(e){return 1==e?"darkgreen":2==e?"navy":3==e?"purple":0==e?"#999":void 0},sortedActions:function(){var e=Object.values(this.actions).sort((function(e,t){return new Date(e.date)-new Date(t.date)}));return console.log("ret",e),e},select:function(e){console.log("typeof info.startStr",v(e.start)),e.start.setHours(12,0,0,0),e.end.setHours(0,0,0,0),this.fromDate=e.start.toISOString(),this.untilDate=e.end.toISOString()},selectAllow:function(e){var t=new Date,a=t.setDate(t.getDate()-1);return!(a>e.start)},revisionClick:function(){this.revision=!0},revisionBackClick:function(){this.revision=!1},saveClick:function(){var e=this;this.ScheduleOpenningHours({actions:Object.values(this.actions)}).then((function(t){t&&e.ListScheduledDays({placeId:e.allPlaces?"__ALL__":e.place}).then((function(t){t&&(e.processScheduledDays(t),e.revision=!1,e.openSuccess("Dni testovania boli nastavené. Verejnosť sa teraz môže objednať k odberu/vakcinácii."))}))}))},createEvent:function(e){var t=this,a="#999";1==e&&(a="darkgreen"),2==e&&(a="navy"),3==e&&(a="purple");for(var n=function(){var n=new Date(s);n.setHours(12,0,0,0);var o=n.toISOString();if(t.calendarOptions.events=t.calendarOptions.events.filter((function(e){return e.start!==o})),e<=3){var r="Šablóna otv. hodín miesta "+e;1===e&&(r=t.template1),2===e&&(r=t.template2),3===e&&(r=t.template3),t.calendarOptions.events.push({title:r,start:o,allDay:!0,backgroundColor:a}),t.actions[o]={date:o,type:"set",openingHoursTemplateId:e,placeId:t.allPlaces?"__ALL__":t.place}}else t.actions[o]={date:o,type:"delete",openingHoursTemplateId:e,placeId:t.allPlaces?"__ALL__":t.place}},s=new Date(this.fromDate);s<new Date(this.untilDate);s.setDate(s.getDate()+1))n();console.log("this.calendarOptions.events",this.calendarOptions.events)}})},y=m,_=a("2877"),g=Object(_["a"])(y,n,s,!1,null,null,null);t["default"]=g.exports}}]);